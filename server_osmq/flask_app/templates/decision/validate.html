{% set page_id = 3 %} {%extends "layout.html"%} {% block head %} {{ super()}}
<link href="{{ url_for('static', filename='css/add_decision.css') }}" rel="stylesheet" />
<link href="{{ url_for('static', filename='jquery-ui/jquery-ui.min.css') }}" rel="stylesheet" />
<script src="{{ url_for('static', filename='js/jquery_validator/jquery.validate.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/jquery_validator/additional-methods.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/jquery_validator/localization/messages_ar.min.js') }}"></script>

<script src="{{ url_for('static', filename='jquery-ui/jquery-ui.min.js') }}"></script>

{% endblock %} {% block menu %}{% include "menus/menu.html" %}{% endblock %} {%
block title %}

{{ _("تأكيد المقرر ") }}

{% endblock %} {% block content %}
<!-- Modal -->

      <div class="container" style="height:60vh;" >
        <div class="row" style="height: 100%">
          <div class="col-6" id="preview-info">
            <h5 onload="loadImage()">المعلومــــات :</h5>
          </div>
          <div class="col-6" id="preview-col">
           
          </div>
        </div>
      </div>
      <div class="container-footer">
<br>
       
    
          <form class="needs-validation" method="POST" novalidate>
            {{ form.hidden_tag() }}
            {% if button_vue ==True %}
            <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#myModal" >المعلومات خاطئة</button>
            
            {{ form.btn_valid() }}
            {% endif %}
            {{ form.btn_next() }}
          </form>
         

          <div class="modal" tabindex="-1" role="dialog" id="myModal">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title">تحديد نوع الخطأ</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  <p>ماهو نوع الخطأ؟</p>
                </div>
                <form class="needs-validation" method="POST" novalidate>
                  {{ form.hidden_tag() }}
                  {{ form.choice_switcher() }}
                  <div id='div_comment' hidden >
                  <label for="{{ form.comment.id_for_label }}" style="display : inline-block ;width: 140px;text-align: left;">{{ form.comment.label }}</label>
                  {{ form.comment() }}
                </div>
                
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">عودة</button>
                  {{ form.btn_sent() }}
                </div>
              </form>
              </div>
            </div>
          </div>

<script>
    var container_info = document.getElementById("preview-info"); 
    var container_pfd = document.getElementById("preview-col");
    var name_pdf='{{scan_decision_url}}'
    
    var resp ='{{resp|tojson}}'
    
    resp = JSON.parse(resp);
    
    
    let decision_type = document.createElement("P");      
    decision_type.innerText="{{ _('نوع المقرر') }}" + " : " + "{{ _(decision_type)}}";
    container_info.appendChild(decision_type); 
      
      
    if (name_pdf !== "None") {    

      
      var iframe = document.createElement("embed");
      iframe.id = "previewpdf";
      iframe.style = "width:500px;height:100%;"
      iframe.src = '{{scan_decision_url}}'
      container_pfd.appendChild(iframe); 
      let decision_num = document.createElement("P");      
      decision_num.innerText="{{ _('رقم المقرر') }}" + " : " + "{{decision_num}}";
      container_info.appendChild(decision_num); 
 
        }

      if ("{{decision_type}}" == "DEBATISATION") {
      
      let decision_num_deb = document.createElement("P");
      decision_num_deb.innerText="{{ _(' رقم المقررالملغى') }}" + " : " + "{{decision_num_deb}}";
      container_info.appendChild(decision_num_deb);
         }
    
    let component_type = document.createElement("P");
    component_type.innerText="{{ _('نوع المنشأة') }}" + " : " + "{{ _(component_type)}}";
    let component_subtype = document.createElement("P")
    component_subtype.innerText="{{ _('صنف المنشأة') }}" + " : " +resp["_type"]
    let component_name_ar = document.createElement("P")
    component_name_ar.innerText="{{ _('الاسم باللغة العربية') }}" + " : " + resp["value_ar"]


    
    

    
    container_info.appendChild(component_type); 
    container_info.appendChild(component_subtype); 
    container_info.appendChild(component_name_ar);
    if (resp["value_fr"]!== null ) {    
    let component_name_fr = document.createElement("P")
    component_name_fr.innerText="{{ _('الاسم باللغة اللاتنية') }}" + " : " + resp["value_fr"] 
    container_info.appendChild(component_name_fr); 
    
  } 
    

      </script>
      

      <script>
$(document).ready(function() {
  $('input[type=radio][name="choice_switcher"]').change(function() {
    if (this.value == 'other'){
      div_comment = document.getElementById('div_comment');
      div_comment.hidden = false;
    }
    else {
      div_comment = document.getElementById('div_comment');
      div_comment.hidden = true;

    }
    
  });
});

      </script>
    

{% endblock %}